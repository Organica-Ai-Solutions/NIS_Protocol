<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Memory System - NIS Protocol</title>
    <link rel="stylesheet" href="../assets/css/styles.css">
    <style>
        .memory-card {
            background: #f5f5f5;
            border-radius: 6px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            border-left: 5px solid #3498db;
        }
        
        .short-term { border-left-color: #3498db; }
        .long-term { border-left-color: #2ecc71; }
        .procedural { border-left-color: #e74c3c; }
        .associative { border-left-color: #f39c12; }
        
        .memory-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }
        
        .memory-table th, .memory-table td {
            border: 1px solid #ddd;
            padding: 8px 12px;
            text-align: left;
        }
        
        .memory-table th {
            background-color: #f2f2f2;
        }
        
        .memory-table tr:nth-child(even) {
            background-color: #f9f9f9;
        }
    </style>
</head>
<body>
    <nav>
        <div class="container nav-container">
            <a href="../index.html" class="nav-logo">NIS Protocol</a>
            <ul class="nav-links">
                <li><a href="../index.html">Home</a></li>
                <li><a href="../architecture/index.html">Architecture</a></li>
                <li><a href="../emotional_state/index.html">Emotional State</a></li>
                <li><a href="../docs/NIS_Protocol_Whitepaper.html">White Paper</a></li>
            </ul>
        </div>
    </nav>
    
    <header>
        <div class="container">
            <h1>Memory System</h1>
            <p>Context-aware decision making through integrated memory systems</p>
        </div>
    </header>
    
    <section>
        <div class="container">
            <h2>Overview</h2>
            <p>
                The NIS Protocol's memory system is inspired by human memory architecture, enabling agents to maintain context across interactions and learn from experience. By integrating short-term and long-term memory, agents can make decisions informed by both immediate context and historical patterns.
            </p>
            
            <p>
                This multi-layered approach to memory enables more sophisticated reasoning, pattern recognition, and adaptive behavior that improves over time.
            </p>
            
            <div class="center">
                <img src="../assets/images/diagram.png" alt="Memory System in Protocol Architecture" style="max-width: 600px; margin: 20px 0;">
                <p><em>The Memory layer is a crucial component in the NIS Protocol architecture</em></p>
            </div>
        </div>
    </section>
    
    <section class="alt">
        <div class="container">
            <h2>Memory Types</h2>
            
            <div class="memory-card short-term">
                <h3>Short-Term Memory (STM)</h3>
                <p>
                    Short-term memory maintains context within current operational scenarios. This memory has limited capacity but high accessibility, representing the "working memory" of the agent.
                </p>
                <h4>Characteristics:</h4>
                <ul>
                    <li><strong>Duration:</strong> Temporary storage (seconds to minutes)</li>
                    <li><strong>Capacity:</strong> Limited to approximately 7±2 items</li>
                    <li><strong>Access Speed:</strong> Very fast</li>
                    <li><strong>Decay:</strong> Rapid without active maintenance</li>
                </ul>
                <h4>Use Cases:</h4>
                <ul>
                    <li>Maintaining context in ongoing conversations or processing</li>
                    <li>Tracking recently observed entities or events</li>
                    <li>Buffering inputs for immediate processing</li>
                    <li>Holding intermediate results during multi-step operations</li>
                </ul>
            </div>
            
            <div class="memory-card long-term">
                <h3>Long-Term Memory (LTM)</h3>
                <p>
                    Long-term memory stores persistent knowledge, patterns, and experiences acquired over time. This memory enables learning and adaptation based on historical experiences.
                </p>
                <h4>Characteristics:</h4>
                <ul>
                    <li><strong>Duration:</strong> Persistent storage (days to years)</li>
                    <li><strong>Capacity:</strong> Virtually unlimited</li>
                    <li><strong>Access Speed:</strong> Slower, requires retrieval mechanisms</li>
                    <li><strong>Decay:</strong> Gradual, based on relevance and access frequency</li>
                </ul>
                <h4>Use Cases:</h4>
                <ul>
                    <li>Storing learned patterns, rules, and models</li>
                    <li>Maintaining historical records of significant events</li>
                    <li>Building user profiles and preferences over time</li>
                    <li>Establishing baseline behaviors for anomaly detection</li>
                </ul>
            </div>
            
            <div class="memory-card procedural">
                <h3>Procedural Memory</h3>
                <p>
                    Procedural memory encodes action sequences and operational procedures, allowing for optimized responses to familiar scenarios without explicit deliberation.
                </p>
                <h4>Characteristics:</h4>
                <ul>
                    <li><strong>Form:</strong> Stored as action patterns or sequences</li>
                    <li><strong>Access:</strong> Often implicit, triggered by context</li>
                    <li><strong>Acquisition:</strong> Developed through repetition and practice</li>
                    <li><strong>Adaptation:</strong> Gradually refined through feedback</li>
                </ul>
                <h4>Use Cases:</h4>
                <ul>
                    <li>Optimized handling of routine operations</li>
                    <li>Automated response sequences for common situations</li>
                    <li>Skill execution in robotics or physical control systems</li>
                    <li>Workflow automation in complex processes</li>
                </ul>
            </div>
            
            <div class="memory-card associative">
                <h3>Associative Memory</h3>
                <p>
                    Associative memory connects related concepts, events, and patterns, enabling inference and recognition of similar situations based on partial information.
                </p>
                <h4>Characteristics:</h4>
                <ul>
                    <li><strong>Structure:</strong> Network of interrelated concepts</li>
                    <li><strong>Retrieval:</strong> Content-addressable by partial matches</li>
                    <li><strong>Flexibility:</strong> Enables pattern completion and generalization</li>
                    <li><strong>Growth:</strong> Expands through new connections and associations</li>
                </ul>
                <h4>Use Cases:</h4>
                <ul>
                    <li>Pattern recognition from partial observations</li>
                    <li>Contextual understanding based on similar past experiences</li>
                    <li>Inference of missing information</li>
                    <li>Metaphorical reasoning and transfer learning</li>
                </ul>
            </div>
        </div>
    </section>
    
    <section>
        <div class="container">
            <h2>Memory Operations</h2>
            
            <h3>Storage Mechanisms</h3>
            <p>
                The NIS Protocol memory system implements several storage mechanisms, each optimized for different types of information:
            </p>
            
            <table class="memory-table">
                <tr>
                    <th>Mechanism</th>
                    <th>Description</th>
                    <th>Best For</th>
                </tr>
                <tr>
                    <td>Key-Value Store</td>
                    <td>Simple associative storage for direct lookups</td>
                    <td>Facts, properties, discrete data points</td>
                </tr>
                <tr>
                    <td>Vector Embeddings</td>
                    <td>Dense numerical representations of concepts in semantic space</td>
                    <td>Semantic similarity searches, conceptual relationships</td>
                </tr>
                <tr>
                    <td>Graph Structures</td>
                    <td>Networks of interconnected nodes representing related concepts</td>
                    <td>Complex relationships, causal networks, hierarchies</td>
                </tr>
                <tr>
                    <td>Time Series</td>
                    <td>Chronologically ordered sequences of observations or events</td>
                    <td>Temporal patterns, event histories, trend analysis</td>
                </tr>
            </table>
            
            <h3>Memory Processes</h3>
            <p>
                The memory system involves several key processes that manage the flow of information:
            </p>
            
            <ol>
                <li><strong>Encoding:</strong> Converting incoming information into appropriate memory representations</li>
                <li><strong>Consolidation:</strong> Transferring important information from STM to LTM</li>
                <li><strong>Retrieval:</strong> Accessing stored information when needed</li>
                <li><strong>Forgetting:</strong> Selectively removing or deprioritizing less relevant information</li>
                <li><strong>Reinforcement:</strong> Strengthening memories through repeated access or relevance</li>
            </ol>
            
            <div class="code-block">
                <pre><code class="language-python">class MemoryManager:
    """Manages different memory types and processes in the NIS Protocol."""
    
    def __init__(self):
        self.short_term = {}  # Simple dict for fast access
        self.long_term = {}   # Persistent storage with indexing
        
    def encode(self, key, value, memory_type="short_term", metadata=None):
        """Store information in the specified memory type."""
        if memory_type == "short_term":
            self.short_term[key] = {
                "value": value,
                "timestamp": time.time(),
                "access_count": 0,
                "metadata": metadata or {}
            }
        elif memory_type == "long_term":
            self.long_term[key] = {
                "value": value,
                "timestamp": time.time(),
                "access_count": 0,
                "metadata": metadata or {}
            }
    
    def retrieve(self, key, memory_type="both"):
        """Retrieve information from memory."""
        result = None
        
        if memory_type in ["short_term", "both"]:
            result = self.short_term.get(key)
            if result:
                result["access_count"] += 1
                return result["value"]
                
        if memory_type in ["long_term", "both"] and not result:
            result = self.long_term.get(key)
            if result:
                result["access_count"] += 1
                return result["value"]
                
        return None
        
    def consolidate(self):
        """Move important information from short-term to long-term memory."""
        current_time = time.time()
        
        for key, item in list(self.short_term.items()):
            # Items accessed frequently or with high importance get consolidated
            if (item["access_count"] > 3 or 
                item["metadata"].get("importance", 0) > 0.7):
                
                self.encode(key, item["value"], "long_term", item["metadata"])
            
            # Remove old items from short-term memory
            if current_time - item["timestamp"] > 3600:  # 1 hour
                self.short_term.pop(key, None)
                
    def forget(self, threshold=0.3):
        """Remove low-relevance items from long-term memory."""
        for key, item in list(self.long_term.items()):
            # Calculate relevance based on recency and access frequency
            age = (time.time() - item["timestamp"]) / (86400 * 30)  # Age in months
            relevance = item["access_count"] / (age + 1)
            
            if relevance < threshold and not item["metadata"].get("permanent", False):
                self.long_term.pop(key, None)</code></pre>
            </div>
        </div>
    </section>
    
    <section class="alt">
        <div class="container">
            <h2>Integration with Cognitive Layers</h2>
            <p>
                The memory system interacts with all cognitive layers in the NIS Protocol:
            </p>
            <ul>
                <li><strong>Perception:</strong> Memory provides context for interpreting sensory inputs, allowing the system to recognize familiar patterns and objects.</li>
                <li><strong>Emotional State:</strong> Memory of past emotional responses influences current emotional modulation, and emotional state affects what is remembered.</li>
                <li><strong>Reasoning:</strong> Memory supplies historical data for informed decision-making, enabling learning from past successes and failures.</li>
                <li><strong>Action:</strong> Procedural memory enables efficient execution of learned behaviors and action sequences.</li>
                <li><strong>Learning:</strong> Updates to memory systems represent the core mechanism of agent learning and adaptation.</li>
            </ul>
            
            <p>
                This integration creates a cohesive cognitive system where each layer both contributes to and benefits from the memory system.
            </p>
        </div>
    </section>
    
    <section>
        <div class="container">
            <h2>Implementation Example</h2>
            <p>
                Here's a practical example of using the memory system in a toll booth scenario:
            </p>
            
            <div class="code-block">
                <pre><code class="language-python">from nis_protocol.memory import MemoryManager
from nis_protocol.agents import VisionAgent

# Initialize components
memory_manager = MemoryManager()
vision_agent = VisionAgent("vision_1")

# Process a vehicle
def process_vehicle(vehicle_image, license_plate):
    # Vision agent processes the vehicle image
    vision_result = vision_agent.process({
        "payload": {"image": vehicle_image}
    })
    
    # Check if we've seen this license plate before
    vehicle_history = memory_manager.retrieve(license_plate, "long_term")
    
    if vehicle_history:
        # We've seen this vehicle before - use historical context
        print(f"Returning vehicle: {license_plate}")
        print(f"Previous visits: {vehicle_history['visit_count']}")
        print(f"Known issues: {vehicle_history.get('flags', 'None')}")
        
        # Update the vehicle record
        vehicle_history['visit_count'] += 1
        vehicle_history['last_visit'] = time.time()
        memory_manager.encode(license_plate, vehicle_history, "long_term")
        
        return True
    else:
        # New vehicle - create a record
        print(f"New vehicle: {license_plate}")
        
        vehicle_record = {
            'first_visit': time.time(),
            'last_visit': time.time(),
            'visit_count': 1,
            'vehicle_type': vision_result['payload']['vehicle_type'],
            'flags': []
        }
        
        memory_manager.encode(license_plate, vehicle_record, "long_term")
        return False
        
# Later, in maintenance functions
def cleanup_memory():
    # Remove records of vehicles not seen in over a year
    memory_manager.forget(threshold=0.1)
    
    # Ensure recent vehicles are properly consolidated
    memory_manager.consolidate()</code></pre>
            </div>
            
            <p>
                In this example, the memory system maintains vehicle records that persist across multiple visits, enabling the system to recognize returning vehicles and access their history.
            </p>
        </div>
    </section>
    
    <section class="alt">
        <div class="container">
            <h2>Memory Optimization Strategies</h2>
            <p>
                For efficient operation of the memory system, consider these optimization strategies:
            </p>
            
            <ol>
                <li><strong>Importance-Based Retention:</strong> Prioritize storage of information based on importance metrics</li>
                <li><strong>Chunking:</strong> Group related items to increase effective memory capacity</li>
                <li><strong>Hierarchical Storage:</strong> Use tiered storage for different access patterns</li>
                <li><strong>Compression:</strong> Store memories in compressed formats to reduce storage requirements</li>
                <li><strong>Indexing:</strong> Create efficient indexes for rapid retrieval of relevant information</li>
                <li><strong>Distributed Storage:</strong> For large-scale systems, distribute memory across multiple nodes</li>
            </ol>
            
            <p>
                These strategies help balance the need for comprehensive memory with practical resource constraints.
            </p>
        </div>
    </section>
    
    <section>
        <div class="container">
            <div class="center">
                <h2>Related Components</h2>
                <div style="margin-top: 2rem;">
                    <a href="../emotional_state/index.html" class="btn">Emotional State System</a>
                    <a href="../architecture/index.html" class="btn">Architecture</a>
                    <a href="../examples/index.html" class="btn">Examples</a>
                    <a href="../index.html" class="btn btn-secondary">Back to Home</a>
                </div>
            </div>
        </div>
    </section>
    
    <footer>
        <div class="container">
            <p>
                &copy; 2024 Organica AI Solutions. Released under MIT License.
            </p>
            <p>
                <a href="https://github.com/Organica-Ai-Solutions/NIS_Protocol">GitHub</a> |
                <a href="../docs/NIS_Protocol_Whitepaper.html">White Paper</a> |
                <a href="../index.html">Home</a>
            </p>
        </div>
    </footer>
    
    <a href="#" class="back-to-top">↑</a>
</body>
</html> 