<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>NIS Protocol v3.2 - VibeVoice API Test Console</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 50%, #334155 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }

        .header {
            background: rgba(15, 23, 42, 0.95);
            backdrop-filter: blur(10px);
            padding: 20px;
            border-radius: 12px;
            margin-bottom: 20px;
            border: 1px solid #475569;
        }

        .header h1 {
            color: #06b6d4;
            font-size: 24px;
            font-weight: 700;
            text-align: center;
            text-shadow: 0 0 20px rgba(6, 182, 212, 0.3);
        }

        .endpoint-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .endpoint-category {
            background: rgba(30, 41, 59, 0.8);
            border: 1px solid #475569;
            border-radius: 12px;
            padding: 20px;
        }

        .category-title {
            color: #22d3ee;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
            padding-bottom: 10px;
            border-bottom: 1px solid #475569;
        }

        .endpoint-item {
            margin-bottom: 12px;
            padding: 10px;
            border: 1px solid #374151;
            border-radius: 8px;
            background: rgba(15, 23, 42, 0.5);
            transition: all 0.3s ease;
        }

        .endpoint-item:hover {
            background: rgba(15, 23, 42, 0.8);
            border-color: #06b6d4;
        }

        .endpoint-path {
            font-family: 'Fira Code', monospace;
            font-size: 14px;
            color: #10b981;
            margin-bottom: 5px;
        }

        .endpoint-method {
            display: inline-block;
            padding: 2px 6px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            margin-right: 8px;
        }

        .method-get { background: #10b981; color: white; }
        .method-post { background: #3b82f6; color: white; }

        .test-button {
            background: linear-gradient(135deg, #06b6d4 0%, #0891b2 100%);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            margin-top: 8px;
        }

        .test-button:hover {
            background: linear-gradient(135deg, #0891b2 0%, #0e7490 100%);
            transform: translateY(-1px);
        }

        .status-indicator {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            margin-left: 8px;
        }

        .status-success { background: #10b981; }
        .status-error { background: #ef4444; }
        .status-pending { background: #f59e0b; }

        .test-results {
            background: rgba(15, 23, 42, 0.8);
            border: 1px solid #475569;
            border-radius: 12px;
            padding: 20px;
            margin-top: 20px;
        }

        .results-title {
            color: #22d3ee;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 15px;
        }

        .result-item {
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 6px;
            font-family: 'Fira Code', monospace;
            font-size: 12px;
        }

        .result-success {
            background: rgba(16, 185, 129, 0.1);
            border: 1px solid rgba(16, 185, 129, 0.3);
            color: #10b981;
        }

        .result-error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            color: #ef4444;
        }

        .global-test-button {
            background: linear-gradient(135deg, #8b5cf6 0%, #7c3aed 100%);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 16px;
            font-weight: 600;
            cursor: pointer;
            margin: 20px auto;
            display: block;
            transition: all 0.3s ease;
        }

        .global-test-button:hover {
            background: linear-gradient(135deg, #7c3aed 0%, #6d28d9 100%);
            transform: translateY(-2px);
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>üß† NIS Protocol v3.2 - API Test Console</h1>
        <p style="text-align: center; margin-top: 10px; color: #a0a0a0;">
            Test all 32 working API endpoints
        </p>
        <div style="text-align: center; margin-top: 15px;">
            <button id="voiceToggle" style="background: rgba(59, 130, 246, 0.2); border: 1px solid #3b82f6; color: #6b7280; padding: 8px 16px; border-radius: 8px; cursor: pointer; font-size: 14px;" title="Voice responses (like Grok/GPT)">
                üéôÔ∏è Voice OFF
            </button>
        </div>
    </div>

    <button class="global-test-button" onclick="testAllEndpoints()">
        üöÄ Test All 32 Endpoints
    </button>

    <div class="endpoint-grid">
        <!-- System Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üè† System (5 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /
                    <span class="status-indicator" id="status-root"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/', 'root')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /health
                    <span class="status-indicator" id="status-health"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/health', 'health')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /status
                    <span class="status-indicator" id="status-status"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/status', 'status')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /docs
                    <span class="status-indicator" id="status-docs"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/docs', 'docs')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /openapi.json
                    <span class="status-indicator" id="status-openapi"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/openapi.json', 'openapi')">Test</button>
            </div>
        </div>

        <!-- VibeVoice Communication Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üéôÔ∏è VibeVoice Communication (4 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /communication/status
                    <span class="status-indicator" id="status-communication-status"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/communication/status', 'communication-status')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /communication/synthesize
                    <span class="status-indicator" id="status-communication-synthesize"></span>
                </div>
                <button class="test-button" onclick="testVibeVoiceTTS()">Test TTS</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /communication/agent_dialogue
                    <span class="status-indicator" id="status-communication-dialogue"></span>
                </div>
                <button class="test-button" onclick="testMultiAgentDialogue()">Test Dialogue</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /communication/stream/demo
                    <span class="status-indicator" id="status-communication-stream"></span>
                </div>
                <button class="test-button" onclick="testRealtimeStreaming()">Test Streaming</button>
            </div>
        </div>

        <!-- Physics Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üî¨ Physics (4 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /physics/capabilities
                    <span class="status-indicator" id="status-physics-capabilities"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/physics/capabilities', 'physics-capabilities')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /physics/validate
                    <span class="status-indicator" id="status-physics-validate"></span>
                </div>
                <button class="test-button" onclick="testPhysicsValidate()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /physics/constants
                    <span class="status-indicator" id="status-physics-constants"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/physics/constants', 'physics-constants')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /physics/pinn/solve
                    <span class="status-indicator" id="status-physics-pinn"></span>
                </div>
                <button class="test-button" onclick="testPhysicsPinn()">Test</button>
            </div>
        </div>

        <!-- NVIDIA NeMo Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üöÄ NVIDIA NeMo (7 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /nvidia/nemo/status
                    <span class="status-indicator" id="status-nemo-status"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/nvidia/nemo/status', 'nemo-status')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /nvidia/nemo/enterprise/showcase
                    <span class="status-indicator" id="status-nemo-showcase"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/nvidia/nemo/enterprise/showcase', 'nemo-showcase')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /nvidia/nemo/cosmos/demo
                    <span class="status-indicator" id="status-nemo-cosmos"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/nvidia/nemo/cosmos/demo', 'nemo-cosmos')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /nvidia/nemo/toolkit/status
                    <span class="status-indicator" id="status-nemo-toolkit"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/nvidia/nemo/toolkit/status', 'nemo-toolkit')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /nvidia/nemo/physics/simulate
                    <span class="status-indicator" id="status-nemo-physics"></span>
                </div>
                <button class="test-button" onclick="testNemoPhysics()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /nvidia/nemo/orchestrate
                    <span class="status-indicator" id="status-nemo-orchestrate"></span>
                </div>
                <button class="test-button" onclick="testNemoOrchestrate()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /nvidia/nemo/toolkit/test
                    <span class="status-indicator" id="status-nemo-test"></span>
                </div>
                <button class="test-button" onclick="testNemoToolkit()">Test</button>
            </div>
        </div>

        <!-- Research Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üîç Research (4 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /research/capabilities
                    <span class="status-indicator" id="status-research-capabilities"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/research/capabilities', 'research-capabilities')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /research/deep
                    <span class="status-indicator" id="status-research-deep"></span>
                </div>
                <button class="test-button" onclick="testResearchDeep()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /research/arxiv
                    <span class="status-indicator" id="status-research-arxiv"></span>
                </div>
                <button class="test-button" onclick="testResearchArxiv()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /research/analyze
                    <span class="status-indicator" id="status-research-analyze"></span>
                </div>
                <button class="test-button" onclick="testResearchAnalyze()">Test</button>
            </div>
        </div>

        <!-- Agent Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">ü§ñ Agents (5 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /agents/status
                    <span class="status-indicator" id="status-agents-status"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/agents/status', 'agents-status')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /agents/consciousness/analyze
                    <span class="status-indicator" id="status-agents-consciousness"></span>
                </div>
                <button class="test-button" onclick="testAgentsConsciousness()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /agents/memory/store
                    <span class="status-indicator" id="status-agents-memory"></span>
                </div>
                <button class="test-button" onclick="testAgentsMemory()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /agents/planning/create
                    <span class="status-indicator" id="status-agents-planning"></span>
                </div>
                <button class="test-button" onclick="testAgentsPlanning()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /agents/capabilities
                    <span class="status-indicator" id="status-agents-capabilities"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/agents/capabilities', 'agents-capabilities')">Test</button>
            </div>
        </div>

        <!-- MCP Integration Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üîå MCP Integration (3 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /api/mcp/demo
                    <span class="status-indicator" id="status-mcp-demo"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/api/mcp/demo', 'mcp-demo')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /api/langgraph/status
                    <span class="status-indicator" id="status-langgraph-status"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/api/langgraph/status', 'langgraph-status')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /api/langgraph/invoke
                    <span class="status-indicator" id="status-langgraph-invoke"></span>
                </div>
                <button class="test-button" onclick="testLanggraphInvoke()">Test</button>
            </div>
        </div>

        <!-- Chat Endpoints -->
        <div class="endpoint-category">
            <div class="category-title">üí¨ Chat (4 endpoints)</div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /chat
                    <span class="status-indicator" id="status-chat"></span>
                </div>
                <button class="test-button" onclick="testChat()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-post">POST</span> /chat/enhanced
                    <span class="status-indicator" id="status-chat-enhanced"></span>
                </div>
                <button class="test-button" onclick="testChatEnhanced()">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /chat/sessions
                    <span class="status-indicator" id="status-chat-sessions"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/chat/sessions', 'chat-sessions')">Test</button>
            </div>
            <div class="endpoint-item">
                <div class="endpoint-path">
                    <span class="endpoint-method method-get">GET</span> /chat/memory/test
                    <span class="status-indicator" id="status-chat-memory"></span>
                </div>
                <button class="test-button" onclick="testEndpoint('GET', '/chat/memory/test', 'chat-memory')">Test</button>
            </div>
        </div>
    </div>

    <div class="test-results" id="testResults" style="display: none;">
        <div class="results-title">üìä Test Results</div>
        <div id="resultsContent"></div>
    </div>

    <script>
        const apiBaseUrl = window.location.origin;
        let testResults = [];

        // Voice functionality (like Grok/GPT)
        let voiceEnabled = false;
        const voiceToggle = document.getElementById('voiceToggle');
        
        if (voiceToggle) {
            voiceToggle.addEventListener('click', () => {
                voiceEnabled = !voiceEnabled;
                voiceToggle.style.color = voiceEnabled ? '#10b981' : '#6b7280';
                voiceToggle.style.borderColor = voiceEnabled ? '#10b981' : '#3b82f6';
                voiceToggle.innerHTML = voiceEnabled ? 'üéôÔ∏è Voice ON' : 'üéôÔ∏è Voice OFF';
                voiceToggle.title = voiceEnabled ? 'Voice ON (like Grok/GPT)' : 'Voice OFF';
                
                // Show voice status in results
                addTestResult({
                    path: '/voice/toggle',
                    method: 'UI',
                    status: 200,
                    success: true,
                    timestamp: new Date().toLocaleTimeString(),
                    data: { message: voiceEnabled ? 'üéôÔ∏è Voice responses enabled! API responses will be spoken.' : 'üîá Voice responses disabled.' }
                }, true);
            });
        }

        // Voice synthesis function (conversational like Grok/GPT)
        async function synthesizeVoiceResponse(text) {
            if (!voiceEnabled || !text || text.trim().length === 0) return;
            
            try {
                // Clean text for better speech synthesis
                const cleanText = typeof text === 'object' ? JSON.stringify(text, null, 2) : text.toString();
                
                // Synthesize speech using VibeVoice
                const response = await fetch('/communication/synthesize', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify({
                        text: cleanText.substring(0, 500), // Limit length for API responses
                        speaker: 'consciousness',
                        emotion: 'informative'
                    })
                });
                
                if (response.ok) {
                    const result = await response.json();
                    if (result.success) {
                        console.log('‚úÖ Voice synthesis successful');
                    }
                }
                
            } catch (error) {
                console.error('Voice synthesis error:', error);
            }
        }

        // Generic endpoint tester
        async function testEndpoint(method, path, statusId) {
            const statusIndicator = document.getElementById(`status-${statusId}`);
            statusIndicator.className = 'status-indicator status-pending';

            try {
                const response = await fetch(`${apiBaseUrl}${path}`, {
                    method: method,
                    headers: {
                        'Content-Type': 'application/json',
                    }
                });

                const result = {
                    path: path,
                    method: method,
                    status: response.status,
                    success: response.ok,
                    timestamp: new Date().toLocaleTimeString()
                };

                if (response.ok) {
                    statusIndicator.className = 'status-indicator status-success';
                    const data = await response.json();
                    result.data = data;
                    addTestResult(result, true);
                } else {
                    statusIndicator.className = 'status-indicator status-error';
                    addTestResult(result, false);
                }
            } catch (error) {
                statusIndicator.className = 'status-indicator status-error';
                addTestResult({
                    path: path,
                    method: method,
                    status: 0,
                    success: false,
                    error: error.message,
                    timestamp: new Date().toLocaleTimeString()
                }, false);
            }
        }

        // Specific POST endpoint testers
        async function testPhysicsValidate() {
            await testPostEndpoint('/physics/validate', 'physics-validate', {
                scenario: "Ball falls from 10m",
                expected_outcome: "Falls at 9.81 m/s¬≤"
            });
        }

        async function testPhysicsPinn() {
            await testPostEndpoint('/physics/pinn/solve', 'physics-pinn', {
                equation_type: "heat_equation",
                boundary_conditions: {"x0": 0, "xL": 1, "t0": 0}
            });
        }

        async function testNemoPhysics() {
            await testPostEndpoint('/nvidia/nemo/physics/simulate', 'nemo-physics', {
                scenario_description: "Test simulation",
                simulation_type: "classical_mechanics"
            });
        }

        async function testNemoOrchestrate() {
            await testPostEndpoint('/nvidia/nemo/orchestrate', 'nemo-orchestrate', {
                workflow_name: "test_workflow",
                input_data: {"query": "test query"}
            });
        }

        async function testNemoToolkit() {
            await testPostEndpoint('/nvidia/nemo/toolkit/test', 'nemo-test', {
                test_query: "What is NVIDIA NeMo?"
            });
        }

        async function testResearchDeep() {
            await testPostEndpoint('/research/deep', 'research-deep', {
                query: "AI research trends",
                research_depth: "basic"
            });
        }

        async function testResearchArxiv() {
            await testPostEndpoint('/research/arxiv', 'research-arxiv', {
                query: "machine learning",
                max_papers: 3
            });
        }

        async function testResearchAnalyze() {
            await testPostEndpoint('/research/analyze', 'research-analyze', {
                content: "Test content for analysis",
                analysis_type: "basic"
            });
        }

        async function testAgentsConsciousness() {
            await testPostEndpoint('/agents/consciousness/analyze', 'agents-consciousness', {
                scenario: "Test consciousness analysis",
                depth: "basic"
            });
        }

        async function testAgentsMemory() {
            await testPostEndpoint('/agents/memory/store', 'agents-memory', {
                content: "Test memory content",
                memory_type: "episodic"
            });
        }

        async function testAgentsPlanning() {
            await testPostEndpoint('/agents/planning/create', 'agents-planning', {
                goal: "Test planning goal",
                constraints: ["test_constraint"]
            });
        }

        async function testLanggraphInvoke() {
            await testPostEndpoint('/api/langgraph/invoke', 'langgraph-invoke', {
                messages: [{"role": "user", "content": "test message"}],
                session_id: "test_session"
            });
        }

        async function testChat() {
            await testPostEndpoint('/chat', 'chat', {
                message: "Hello test",
                session_id: "test_session"
            });
        }

        async function testChatEnhanced() {
            await testPostEndpoint('/chat/enhanced', 'chat-enhanced', {
                message: "Enhanced test",
                session_id: "test_session",
                enable_memory: true
            });
        }

        // VibeVoice Communication Test Functions
        async function testVibeVoiceTTS() {
            await testPostEndpoint('/communication/synthesize', 'communication-synthesize', {
                text: "Hello from the NIS Protocol consciousness agent using VibeVoice technology",
                speaker: "consciousness",
                emotion: "thoughtful"
            });
        }

        async function testMultiAgentDialogue() {
            await testPostEndpoint('/communication/agent_dialogue', 'communication-dialogue', {
                agents_content: {
                    consciousness: "System consciousness is at optimal levels",
                    physics: "All physics validations are passing perfectly",
                    research: "Research capabilities are fully operational",
                    coordination: "Agent coordination is seamless and efficient"
                },
                dialogue_style: "conversation"
            });
        }

        async function testRealtimeStreaming() {
            await testPostEndpoint('/communication/stream/demo', 'communication-stream', {});
        }

        // Generic POST endpoint tester
        async function testPostEndpoint(path, statusId, payload) {
            const statusIndicator = document.getElementById(`status-${statusId}`);
            statusIndicator.className = 'status-indicator status-pending';

            try {
                const response = await fetch(`${apiBaseUrl}${path}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(payload)
                });

                const result = {
                    path: path,
                    method: 'POST',
                    status: response.status,
                    success: response.ok,
                    timestamp: new Date().toLocaleTimeString()
                };

                if (response.ok) {
                    statusIndicator.className = 'status-indicator status-success';
                    const data = await response.json();
                    result.data = data;
                    addTestResult(result, true);
                } else {
                    statusIndicator.className = 'status-indicator status-error';
                    addTestResult(result, false);
                }
            } catch (error) {
                statusIndicator.className = 'status-indicator status-error';
                addTestResult({
                    path: path,
                    method: 'POST',
                    status: 0,
                    success: false,
                    error: error.message,
                    timestamp: new Date().toLocaleTimeString()
                }, false);
            }
        }

        // Add test result to display
        function addTestResult(result, success) {
            testResults.push(result);
            
            const resultsDiv = document.getElementById('testResults');
            const contentDiv = document.getElementById('resultsContent');
            
            resultsDiv.style.display = 'block';
            
            const resultDiv = document.createElement('div');
            resultDiv.className = success ? 'result-item result-success' : 'result-item result-error';
            
            resultDiv.innerHTML = `
                [${result.timestamp}] ${result.method} ${result.path} - 
                ${success ? '‚úÖ SUCCESS' : '‚ùå FAILED'} 
                (${result.status || 'Connection Error'})
                ${result.error ? ` - ${result.error}` : ''}
            `;
            
            contentDiv.appendChild(resultDiv);
            contentDiv.scrollTop = contentDiv.scrollHeight;
            
            // Add voice synthesis for successful results if enabled
            if (voiceEnabled && success && result.data) {
                const voiceText = result.data.message || 
                                 result.data.response || 
                                 `${result.method} ${result.path} completed successfully`;
                synthesizeVoiceResponse(voiceText);
            }
        }

        // Test all endpoints
        async function testAllEndpoints() {
            const button = document.querySelector('.global-test-button');
            button.disabled = true;
            button.textContent = 'üîÑ Testing All Endpoints...';
            
            // Clear previous results
            testResults = [];
            document.getElementById('resultsContent').innerHTML = '';
            
            // Test all endpoints with delay to avoid overwhelming the server
            const delay = (ms) => new Promise(resolve => setTimeout(resolve, ms));
            
            // System endpoints
            await testEndpoint('GET', '/', 'root');
            await delay(100);
            await testEndpoint('GET', '/health', 'health');
            await delay(100);
            await testEndpoint('GET', '/status', 'status');
            await delay(100);
            await testEndpoint('GET', '/docs', 'docs');
            await delay(100);
            await testEndpoint('GET', '/openapi.json', 'openapi');
            await delay(100);
            
            // Physics endpoints
            await testEndpoint('GET', '/physics/capabilities', 'physics-capabilities');
            await delay(100);
            await testPhysicsValidate();
            await delay(100);
            await testEndpoint('GET', '/physics/constants', 'physics-constants');
            await delay(100);
            await testPhysicsPinn();
            await delay(100);
            
            // NVIDIA NeMo endpoints
            await testEndpoint('GET', '/nvidia/nemo/status', 'nemo-status');
            await delay(100);
            await testEndpoint('GET', '/nvidia/nemo/enterprise/showcase', 'nemo-showcase');
            await delay(100);
            await testEndpoint('GET', '/nvidia/nemo/cosmos/demo', 'nemo-cosmos');
            await delay(100);
            await testEndpoint('GET', '/nvidia/nemo/toolkit/status', 'nemo-toolkit');
            await delay(100);
            await testNemoPhysics();
            await delay(100);
            await testNemoOrchestrate();
            await delay(100);
            await testNemoToolkit();
            await delay(100);
            
            // Research endpoints
            await testEndpoint('GET', '/research/capabilities', 'research-capabilities');
            await delay(100);
            await testResearchDeep();
            await delay(100);
            await testResearchArxiv();
            await delay(100);
            await testResearchAnalyze();
            await delay(100);
            
            // Agent endpoints
            await testEndpoint('GET', '/agents/status', 'agents-status');
            await delay(100);
            await testAgentsConsciousness();
            await delay(100);
            await testAgentsMemory();
            await delay(100);
            await testAgentsPlanning();
            await delay(100);
            await testEndpoint('GET', '/agents/capabilities', 'agents-capabilities');
            await delay(100);
            
            // MCP endpoints
            await testEndpoint('GET', '/api/mcp/demo', 'mcp-demo');
            await delay(100);
            await testEndpoint('GET', '/api/langgraph/status', 'langgraph-status');
            await delay(100);
            await testLanggraphInvoke();
            await delay(100);
            
            // VibeVoice Communication endpoints
            await testEndpoint('GET', '/communication/status', 'communication-status');
            await delay(100);
            await testVibeVoiceTTS();
            await delay(100);
            await testMultiAgentDialogue();
            await delay(100);
            await testRealtimeStreaming();
            await delay(100);
            
            // Chat endpoints
            await testChat();
            await delay(100);
            await testChatEnhanced();
            await delay(100);
            await testEndpoint('GET', '/chat/sessions', 'chat-sessions');
            await delay(100);
            await testEndpoint('GET', '/chat/memory/test', 'chat-memory');
            
            // Calculate results
            const successCount = testResults.filter(r => r.success).length;
            const totalCount = testResults.length;
            
            button.disabled = false;
            button.innerHTML = `üéâ Testing Complete: ${successCount}/${totalCount} Success`;
            
            // Add summary
            const summaryDiv = document.createElement('div');
            summaryDiv.className = successCount === totalCount ? 'result-item result-success' : 'result-item result-error';
            summaryDiv.innerHTML = `
                üìä SUMMARY: ${successCount}/${totalCount} endpoints working (${Math.round(successCount/totalCount*100)}% success rate)
            `;
            document.getElementById('resultsContent').appendChild(summaryDiv);
        }
    </script>
</body>
</html>
